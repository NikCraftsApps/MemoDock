<Window x:Class="MemoDock.Views.PinnedWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:MemoDock.ViewModels"
        Title="Pinned - MemoDock" Height="500" Width="720"
        WindowStartupLocation="CenterOwner"
        Background="{StaticResource BgBrush}">
    <Window.DataContext>
        <vm:PinnedViewModel/>
    </Window.DataContext>

    <DockPanel>

        <Border DockPanel.Dock="Top"
                Background="{StaticResource SurfaceBrush}"
                Padding="10"
                BorderBrush="{StaticResource BorderBrush1}"
                BorderThickness="0,0,0,1">
            <TextBlock Text="Pinned"
                       FontWeight="SemiBold" FontSize="16"
                       VerticalAlignment="Center"/>
        </Border>

        <ListBox x:Name="PinnedList"
                 ItemsSource="{Binding Pinned}"
                 Background="{x:Null}" BorderThickness="0"
                 ScrollViewer.CanContentScroll="True"
                 ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                 VirtualizingPanel.IsVirtualizing="True"
                 VirtualizingPanel.VirtualizationMode="Recycling"
                 HorizontalContentAlignment="Stretch"
                 AllowDrop="True"
                 PreviewMouseLeftButtonDown="PinnedList_PreviewMouseLeftButtonDown"
                 MouseMove="PinnedList_MouseMove"
                 DragOver="PinnedList_DragOver"
                 Drop="PinnedList_Drop">

            <ListBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <VirtualizingStackPanel/>
                </ItemsPanelTemplate>
            </ListBox.ItemsPanel>

            <ListBox.ItemContainerStyle>
                <Style TargetType="ListBoxItem">
                    <Setter Property="Padding" Value="0"/>
                    <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                </Style>
            </ListBox.ItemContainerStyle>

            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Border Style="{StaticResource Card}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <Border Background="{StaticResource SurfaceAltBrush}"
                                    CornerRadius="10" Width="80" Height="80" Margin="0,0,14,0"
                                    BorderBrush="{StaticResource BorderBrush1}" BorderThickness="1">
                                <Grid>
                                    <Image Width="80" Height="80" Stretch="UniformToFill"
                                           Source="{Binding Thumbnail}">
                                        <Image.Style>
                                            <Style TargetType="Image">
                                                <Setter Property="Visibility" Value="Collapsed"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding Type}" Value="image">
                                                        <Setter Property="Visibility" Value="Visible"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Image.Style>
                                    </Image>
                                    <TextBlock Text="TXT" VerticalAlignment="Center"
                                               HorizontalAlignment="Center" FontWeight="Bold"
                                               Foreground="{StaticResource TextMutedBrush}">
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="Visibility" Value="Collapsed"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding Type}" Value="text">
                                                        <Setter Property="Visibility" Value="Visible"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>
                                </Grid>
                            </Border>

                            <StackPanel Grid.Column="1">
                                <TextBlock Text="{Binding DisplayText}"
                                           TextWrapping="Wrap"
                                           TextTrimming="CharacterEllipsis"/>
                                <TextBlock Text="{Binding UpdatedAt, StringFormat='{}{0:yyyy-MM-dd HH:mm}'}"
                                           Foreground="{StaticResource TextMutedBrush}"
                                           Margin="0,6,0,0"/>
                            </StackPanel>

                            <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Top">
                                <Button Style="{StaticResource ActionButton}" Content="Copy"
                                        Command="{Binding CopyToClipboardCommand}"
                                        Margin="0,0,10,0"/>
                            </StackPanel>
                        </Grid>
                    </Border>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </DockPanel>
</Window>
